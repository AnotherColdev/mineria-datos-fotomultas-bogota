---
title: "Comparendos en Bogotá Colombia 2021"
author: "Santiago Calderón, Juan Esteban Fajardo, Carlos Enrique Almario"
date: "2024-10-16"
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
# 1. Introducción
El proceso KDD permite transformar grandes volúmenes de información en conocimiento útil. En este proyecto aplicamos el enfoque KDD utilizando técnicas de clustering para analizar los comparendos registrados en Bogotá, Colombia en el año 2021, con el objetivo de identificar patrones y agrupaciones que permitan comprender mejor las características de las infracciones de tránsito y cómo estas varían según factores como la ubicación, el tipo de infracción, fecha, entre otros.

# 2. Justificación
El análisis de los comparendos de tránsito es crucial para mejorar la gestión y las políticas públicas relacionadas con la movilidad y la seguridad vial. Los datos de comparendos registrados en Bogotá, Colombia en 2021, permitirán comprender las zonas y fechas con mayores infracciones y las infracciones más comunes. El uso de técnicas de clustering nos ayudará a segmentar los datos, facilitando la creación de perfiles de infractores o zonas críticas, lo que puede ser utilizado por autoridades de tránsito para tomar decisiones más informadas.

# 3. Objetivos
## 3.1. Objetivo General
Identificar patrones y agrupaciones en los comparendos registrados en Bogotá Colombia en 2021 registrados según su zona, tipo de vehículo y fecha y hora mediante técnicas de clustering, para mejorar el entendimiento de las infracciones de tránsito y su distribución geográfica y temporal, permitiendo plantear estrategias que permitan reducir la incurrencia en este tipo de infracciones

## 3.2. Objetivos Especificos

•	Seleccionar y preprocesar los datos de comparendos de manera adecuada para su análisis.

•	Aplicar técnicas de clustering para segmentar los comparendos

•	Analizar las características de los clusters identificados y proponer recomendaciones basadas en los resultados.

•	Identificar zonas con mayor incidencia de infracciones y de qué tipo.

•	Determinar en qué horarios y días de la semana se registran más infracciones.

•	Agrupar las infracciones por tipo y analizar factores comunes (vehículos, hora, dirección).

# 4. Fases del proceso KDD
## 4.1. Dominio del problema

Los comparendos de tránsito son sanciones impuestas a los conductores por infringir las normas de tránsito. En Colombia, estas infracciones incluyen desde el mal estacionamiento hasta conducir bajo la influencia de alcohol. En este análisis, nos enfocamos en identificar patrones recurrentes y áreas críticas de infracciones. Las variables principales consideradas incluyen la fecha de la infracción, la ubicación geográfica, y el tipo de infracción.

El problema consiste en analizar grandes volúmenes de datos sobre infracciones de tránsito ocurridas en Colombia en 2021, con el objetivo de agrupar estas infracciones en clústeres que compartan características comunes. Esto permitiría identificar patrones geográficos o temporales relacionados con el tipo de infracción para generar insights valiosos, como áreas con mayor incidencia u horarios críticos en los que ocurren las infracciones.


## 4.2. Selección de los datos
Actualmente el dataset cuenta con mas de 480000 filas y 16 columnas. Al revisar el contenido se procede a escoger las columnas que seran utilizadas para este proyecto, pasando a 11 columnas, a continuación se detallan:

•	NUM_COMPAR: Numero de comparendo en el que es cargado la información del comparendo

•	FECHA_HORA: Registra la fecha y la hora en la que el comparendo fue subido al sistema

• HORA_OCURR: Hora en la que es tomado el comparendo

•	MEDIO_DETE:	Medio por el que fue registrado el comparendo

• CLASE_VEHI:	Tipo de vehículo al que se realiza el comparendo

• TIPO_SERVI:	Servicio que ofrece el vehículo

• INFRACCION:	Id de la infracción cometida

• DES_INFRAC:	Descripción de la infracción

• LOCALIDAD:	Localidad en la que ocurren los hechos

• DIRECCION:	Dirección donde ocurren los hechos


Variables Clave Para lograr los objetivos del proyecto, se utilizarán las siguientes variables:

•	Fecha y hora: Para identificar patrones temporales.

•	Localidad y dirección: Para analizar la distribución geográfica de las 
infracciones.

•	Tipo de infracción: Para categorizar y entender la naturaleza de las 
infracciones.

•	Tipo de vehículo: Para analizar las infracciones según el tipo de vehículo y su uso.

Estas variables nos proveen la información necesaria para el cumplimiento de los objetivos del proyecto, al darnos la información necesaria del lugar, hora, tipo de infracción y tipo de vehículo involucrado, excluyendo la información extra que para el caso no es relevante, como el medio de detección utilizado y el tipo de servicio del vehículo (publico/particular)
```{r}
library(readr)
library(dplyr)
library(tidyverse)
library(VIM)
library(scales)
library(lubridate)
library(caret)
```


## 4.3. Limpieza de los datos
```{r cars}
# Cargar el dataset
estudio <- read_csv("C:\\Users\\majas\\OneDrive\\Escritorio\\Universidad\\8.semestre\\Mineria datos\\Proyecto\\Comparendos_2021_Bogota_D_C.csv")

# Visualización inicial del dataset
View(estudio)       # Abre el dataset en una ventana de vista
head(estudio)       # Muestra las primeras filas del dataset
summary(estudio)    # Resumen estadístico de todas las columnas
str(estudio)        # Revisa la estructura del dataset y el tipo de cada variable

# 1. Eliminar filas que no contienen ningún valor (filas completamente vacías)
estudio <- estudio %>% filter(!if_all(everything(), is.na))

# 2. Eliminar columnas que están completamente vacías
estudio <- estudio %>% select_if(~ !all(is.na(.)))

# 3. Eliminar filas duplicadas
duplicated_rows <- estudio %>% duplicated()
print(paste("Número de filas duplicadas:", sum(duplicated_rows)))
estudio <- estudio %>% distinct()  # Eliminar filas duplicadas, si existen

# 4. Filtrar solo las columnas necesarias
estudio <- estudio %>% select(NUM_COMPAR, FECHA_HORA, HORA_OCURR, MEDIO_DETE, CLASE_VEHI, TIPO_SERVI, INFRACCION, DES_INFRAC, LOCALIDAD, DIRECCION)

# 5. Reemplazar "-" en las columnas CLASE_VEHI y TIPO_SERVI por "Peatón"
estudio <- estudio %>% 
  mutate(CLASE_VEHI = ifelse(CLASE_VEHI == "-" | is.na(CLASE_VEHI), "Peatón", CLASE_VEHI),
         TIPO_SERVI = ifelse(TIPO_SERVI == "-" | is.na(TIPO_SERVI), "Peatón", TIPO_SERVI))

# Visualizar el dataset modificado
View(estudio)

```

## 4.4. Transformación de datos
# 5. Anexos
# 6. Bibliografia
